{% extends 'base.html' %}

{% block head %}
<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/new_search.css') }}" />
{% endblock %}

{% block body %}
<div class="s003">
    <form action="/newsearch/" , method="GET" style="margin-left: auto; margin-right: auto;">
        <div class="inner-form">
            <div class="input-field first-wrap">
                <div class="input-select">
                    <select data-trigger="" name="category">
                        <option placeholder="">category</option>
                        {% for category in categories %}
                        <option>{{ category }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="input-field second-wrap">
                <input id="search" type="text" name="terms" placeholder="Enter Keywords?" />
            </div>
            <div class="input-field third-wrap">
                <button class="btn-search" type="submit">
                    <svg class="svg-inline--fa fa-search fa-w-16" aria-hidden="true" data-prefix="fas"
                        data-icon="search" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path fill="currentColor"
                            d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z">
                        </path>
                    </svg>
                </button>
            </div>
        </div>
    </form>
</div>

<div class="overview">
    <div class="result-header">
        <h1>Search Results</h1>
        {% if results|length < 1 %}
        <h2 class="lead">No results were found for "<strong class="text-danger">{{terms}}</strong>"</h2>
        {% else %}
        <h2 class="lead"><strong class="text-danger">{{results_count}}</strong> results were found for "<strong
                class="text-danger">{{terms}}</strong>"</h2>
        {% endif %}
    </div>

    <div class="grid-container">
        {% for result in results %}
        <div class="card">
            <div class="bg-img">
                <img src="{{ url_for('static', filename=result.img_file[9:]) }}" alt="{{result.title}}" />
            </div>
            <div class="content">
                <h4>{{result.title}}</h4>
                <p>{{result.desc}}</p>
                <a class="card-btn" href="{{result.url}}">Recipe</a>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <div class="btn-container">
        {% if p | int > 1 %}
        <a type="button" class="btn page-btn btn-outline-dark l-btn"
            onclick='location.href="{{ url_for('newsearch', category=category, terms=terms, p=p|int-1) }}"'>Previous Page
        </a>
        {% else %}
        <div></div>
        {% endif %}
        {% if p | int < results_count/12 %}
        <a type="button" class="btn page-btn btn-outline-dark r-btn"
            onclick='location.href="{{ url_for('newsearch', category=category, terms=terms, p=next_page) }}"'>Next Page
        </a>
        {% else %}
        <div></div>
        {% endif %}
    </div>
</div>

<script type="text/javascript" src="{{ url_for('static', filename='js/extention/choices.js') }}"></script>
<script type="text/javascript">
    const choices = new Choices('[data-trigger]',
        {
            searchEnabled: false,
            itemSelectText: '',
        });

</script>
{% endblock %}